<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script type="text/javascript" src="jquery.min.js"></script>
        <script type="text/javascript" src="qrcode.js"></script>
        <title>Document</title>
    </head>
    <body>
        <input
            id="text"
            type="text"
            value="Place link here..."
            style="width: 80%"
        /><br />
        <div
            id="qrcode"
            style="width: 100px; height: 100px; margin-top: 15px"
        ></div>

        <script type="text/javascript">
            let qrcode = new QRCode(document.getElementById("qrcode"), {
                width: 100,
                height: 100,
            });

            function getURL() {
                var image = document.querySelector("img").getAttribute("src");
                // console.log(image);
                downloadImage(image);
            }

            function downloadImage(base64Image) {
                // Create a temporary link element
                var link = document.createElement("a");
                link.href = base64Image; // Replace 'png' with appropriate format
                link.download = "image.png"; // Set the desired file name

                // Trigger the click event to download the image
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            function generateCodes(amount = 10) {
                const codes = new Set();
                while (codes.size < 10) {
                    let code = "";
                    for (let j = 0; j < 5; j++) {
                        code += Math.floor(Math.random() * amount);
                    }
                    codes.add(code);
                }
                return Array.from(codes);
            }

            function makeQrFromCodes() {
                const body = document.querySelector("body");
                const codes = generateCodes(10);
                for (let code of codes) {
                    qrcode.clear();
                    qrcode.makeCode(code);
                    let image = qrcode._oDrawing._elImage;
                    body.append(image);
                    console.log(qrcode._oDrawing._elImage, code);
                    // getURL();
                }
            }

            window.onload = function () {
                makeQrFromCodes();
            };
        </script>
    </body>
</html>
